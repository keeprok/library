## 상태

- 웹 ,애플리케이션 개발 시의 상태는 어떠한 의미를 지닌 값이다.
- 애플리케이션의 시나리오에 따라 지속적으로 변경될 수 있는 값
- ex) UI, URL, form, 서버에서 가져온값

## 상태 관리를 위한기준

- 상태의 위치
- 전역 변수유무
- 별도의 클로저 생성 유무
- 유효한 범위는 어떻게 제한할지
- 변화에따른 자식 요소들의 상태 변화 감지 현상
- tearing \*\*은 어떻게 방지할 것인가?
  - tearing : (상태변화가 일어남에 다라 애플리케이션이 찢어지는현상)
  - 하나의 상태에 따라 서로 다른 결과물을 사용자에게 보여주는 현상

# 리액트상태 관리의 역사

## **Flux 패턴의 등장**

- 이전까진 웹 애플리케이션이 비대해지고 상태(데이터)도 많아짐에따라 변화및 추적이 이해하기 어려웠다

### **Flux 패턴**

> 단방향 흐름을 정의한다
> 데이터 흐름 을 추적하기 쉽고 코드를 이해하기 수월하다
>
> - 리액트는 대표적인 단방향 데이터 바인딩 기반 라이브러리로 Flux 와 궁합이 좋았다

### **용어**

- Action
  - 어떠한 작업을 처리할 액션과 액션 발생시 함께 포함시킬 데이터를 의미
  - 타입과 데이터를 각각 정의 후 Dispatcher 로 보냄
- Dispatcher
  - 액션을 Store에 보내는 역할
  - 콜백함수 형태이다
- Store
  - 실제 상태에따른 값과 상태를 변경할수잇는 메서드를 보유
  - 리듀서 액션의 타입에 다라 어떻게 이를 변경할지 정의 됨
- View
  - 리액트의 컴포넌트에 해당하는 부분
  - Store에서 만들어진 데이터를 가져와 화면에 렌더링 하는 역할
  - View에서도 사용자의 행동에따라 상태를 업데이트 할수있다
  ![image.png](https://prod-files-secure.s3.us-west-2.amazonaws.com/b5ee3553-7964-4584-8043-89e0b1bbe8e7/c4851eca-0b98-476f-9002-28dde56207dc/image.png)

### **Flux 패턴단점(단방향 데이터흐름방식의 단점)**

- 사용자 입력에따른 데이터 갱신 및 업데이트 코드를 작성 (코드의 양이 많아지고 , 개발자가 수고스러움)

## 상태 지바자 러덕스의 등장

### ELM 아키텍쳐

- Model
  - 앱의 상태를 의미
  - 초기값은 0
- View
  - Model을 표현하는 HTML
  - (Model을 인수로 받아서 HTML 표현)
- Update
  - Model 을 수정하는 방식
  - Increment, Decrement를 선언해 각자의 방식이 어떻게 Model을 수정하는 나타냄

## Redux

- 하나의 상태 객체를 스토어에 저장
- 위 객체의 업데이트 작업을 디스패치후 업데이트 수행
  ### **Redux 장단점**
  **장점**
  - prop 내려주기 문제를 해결
    - prop 내려주기 : 하나의 글로벌 상태 객체를 통해 하위 컴포넌트로 전파할수잇어
      props를 깊이 전파해야 하는 문제
  **단점**
  - 작업이 복잡해졌다 (보일러 플레이트가 너무 많다)
    - 상태를 변화할때
    > 액션 타입 선언 ,
    > 액션을 수행할 create 함수 생성,
    > dispatcher와 selector 생성,
    > 새로운 상태가 기존의 Reducer와 어떤식으로 내부에서 변경해야할지
    > or 새로 만들거나 새로 정의 해야할지
- **현재 업데이트가 됨에따라 위 단점은 많이 간소화되었다.**

## **Context API와 useContext**

- props 를 가지고 있는 부모에서 필요한 자식 컴포넌트까지 끈임없이 인수로 전달해야했다
  - props 가 컴포넌트를 관통하는 현상
- React 16.3 : 전역 상태를 하위 컴포너트에 주입할 수 있는 Context API 를 출시 했다.
  - React 16.3 이전 : contex가 존재는 했다 이를 다루기위한 getChildContext() 를 제공했다
  - 불필요한 렌더링 발생 , 컴포넌트끼리의 결합도가 높아짐

## **훅의 탄생, 그리고 React Query와 SWR**

- React 16.8 버전 : 훅 ApI 가 추가 되었다
- state를 매우 손쉽게 재사용 가능해졌다

### React Query, SWR

- 훅과 state 의 등장으로 생겨났다
- 외부에서 fetch 를 하는데 특화되있지만 API 호출에 상태를 관리하기때문에
  HTTP요청에 특화된 상태 관리 라이브리라 볼수있다

## **Recoil, Zustand, Jotai, Valtio 에 이르기까지**

- 훅의 등장에 따라 훅을 활용해 상태를 가져오거나 관리할수있는 다양한 라이브러리가 생겨났다
  ### Redux와 차이점
  - 훅을 활용해 작은 크기의 상태를 효율적으로 관리할 수 있다
  - 별도의 라이브러리를 설치하지않아도 된다
  - 기존의 아쉬운점에서 벗어나 개발자 원하는 만큼 상태를 지역적으로 관리하는것이 가능해졌다
  - 훅을 지원함으로써 함수 컴포넌트에서 손쉽게 사용할수있다
