# 싱글 페이지 어플리케이션이란 : SPA

- 렌더링과 라우팅에 필요한 대부분의 기능을 서버가 아닌 브라우저의 JS에 의존하는 방식
- 처음 페이지에서 데이터를 모두 불러온 이후로는 서버 에서 HTML 을 내려받지않고 하나의 페이지에서 모든 작업 처리
  ## <body/> 의 내부 내용
  - HTML 코드를 통해서는 비어있는 내용을 확인할수있다
  - JS를 실행이후에 랜더링후 확인 가능
  - 페이지 전환시 : JS 통해 <body /> 내부화 DOM을 추가 , 수정 , 삭제 하는 방법으로 페이지 전환
  ## 전통적인 방식 의 애플리케이션과 SPA의 작동 비교
  1. 전통적인 방식
     1. 페이지 전환시 마다 새롭게 페이지 요청 > HTML 페이지 다운하여 파싱
     - 페이전환을 모두 자바스크립트 로 한다면
       - 최초에 한번 모든 리소스를 다운하고나면 이후 페이지를 전환할 때 추가로 필요한 영역만 다운 후 다시 그리게 되어 훨씬 매끄럽다
  2. SPA
     1. 가장 완성도 높은 예시로는 : Gmail 이 있다
        1. Gmail 에서 각 목록별 ex( 이메일 목록 → 이메일 메시지) 전환시 주소는 변경되지만 목록만 특정 메일로 매끄럽게 전환됨
  ## **싱글 페이지 랜더링 방식의 유행과 JAM 스택의 등장**
  - JS의 다양한 작업 수행 능력
    1. 모듈화 ex) CommonJS , AMD
    - 사용자 기기의 성능 향상 + 인터넷 속도의 발전 이후
    1. MVx 프레임워크를 구현 ex) Backbone.js , AngularJS , Knockout.js
       1. JS에서도 복잡한 작업을 할수있다는것을 의미
    2. 오늘날의 JS ex) React , Vue , Angular
       1. 많은 웹 애플리케이션이 JS를 제외하고 제대로 페이지를 보여줄수없을 정도
          1. 의존성 ++
    - 최종적으로 싱글 페이지 렌더링이 인기가 많아짐
      - SPA는 프론트엔드 개발자들에게 간편한 개발 경험 제공및 간편하게 웹 애플리케이션을 만들수 있엇다
  - LAMP 스택 vs JAM 스택
    JS에서 다양한 작업 수행능력이 가능해짐에 분기로 나눠짐
    - LAMP
      - JS 발전이전
      - Linux(운영체제) , Apache(서버) , MySQL(데이터베이스) , PHP/Pyton(웹 프레임워크)
      - 대부분의 처리를 서버에서 처리 → 서버 의존적인 문제 → 웹 애플리케이션의 확장성에도 걸림돌
    - JAM 스택
      - JS 발전 이후
      - JS , API , Markup
      - JS , Markup 미리 빌드 → 정적으로 사용자에게 제공 → 클라이언트에서 사용되어 확장성에 용이함
  - JS로 구현한 API 서버
    JAM 스택의 인기 + Node.js의 고도화
    - MEAN(MongoDB , Express.js , AngularJS)
    - MERN(MongoDB , Express.js , React , Node.js)
  ## **새로운 패러다임의 웹서비스를 향한 요구**
  - 기술의 발전으로 인해 JS의 리소스가 증가 하더라도 웹페이지의 속도가 개선될것이라 믿었다
    - 기기의 성능은 좋아지고 있지만 but
    - 웹 페이지 로딩 20초
    - 액션 취하기전 대기 15초
  - 개발자들은 제품의 웹 서비스 환경에 관해 고민해야된다 라는 의견

# 서버 사이드 렌더링이란

- 최초에 사용자에게 보여줄 화면을 서버에서 렌더링후 빠르게 사용자에게 화면을 제공하는 방식
- SPA의 문제인 웹페이지가 점점느려지는 태생적인 한계를 개선하고자 SSR가 떠오르고 있다
  ### SPA , SSR 차이
  - 웹페이지의 렌더링의 책임을 어디에 두느냐 에 따른다
    - SPA : 사용자에게 제공되는 JS 번들에서 렌더링 담당
    - SSR : 렌더링에 필요한 작업을 모두 서버에서 수행
  ## SSR 의 장점
  ### 1. 최초 페이지 진입이 비교적 빠르다
  - 단 서버가 사용자를 감당하지 못하고 , 리소스를 확보하기 어렵다면 오히려 SPA보다 느려질수 있다
  ### 2. 검색 엔진과 SNS 공유 등 메타 데이터 제공이 쉽다
  - 검색 엔진이 사이트에서 피요한 정보를 가져가는 과정
    1. 페이지에 진입
    2. 페이지가 제공한 HTML 다운 , 단 다운만하고 JS 코드는 실행 x
    3. 다운한 HTML 페이지 내부의 오픈그래프(Open Graph) , 메타(meta) 태그 정보를 기반으로 SEO 정보를 가져와 이를 바탕으로 검색엔진에 저장
  - SPA의 경우 대부분의 작동이 JS에 의지하여 SEO를 제공하는데 조치를 취하지 어려울경우 불이익있지만
  - SSR의 경우 HTML 응답을 통해 SEO 최적화 하기 좋다
  ### 3. 누적 레이아웃 이동이 적다
  - 누적 레이아웃 이동 이란
    - 사용자에게 페이지를 보여준 이후 HTML 이 추가 및 삭제 될경우 화면이 흔들리면서 느끼는 부정적인 사용자 경험을 말한다
  - API 요청에 의존하는부분과 응답속도에따라 SPA는 처리가 적절치 못할경우 누적 레이아웃 이동 문제 발생하지만 SSR의경우 이미 완료 된시점에서 페이지를 제공하여 문제에서 비교적 자유롭다
  - 그렇지만 리액트18 에서 등장한 스트림의 해결책이전에는 SSR또한 누적 레이아웃 이동 의 문제에 관해서 자유롭지는 못했다
  ### 4. 사용자의 디바이스 성능에 비교적 자유롭다
  - SSR의 경우 SPA보다는 JS를 중점으로 하지않기때문에 사용자 디바이스 성능에 자유롭지만
  - 인터넷 속도 , 사용자 방문으로인한 서버 부담 을 통해 SSR또한 느려질수 있다
  ### 5. 보안에 좀더 안전하다
  - JAM 스택을 사용한 프로젝트의 공통적인 문제로 애플리케이션의 모든활동이 브라우저에 노출된다 (개발자 도구를 통해)
  - SSR의 경우 서버 에서 인증 , 민감한 작업을 수행하고 결과만 브라우저에 제공하여 보안 위협을 피할수 있다
  ## SSR 의 단점
  ### 1. 소스코드를 작성할 때 항상 서버를 고려해야 한다
  - window , sessionStorage와 같이 각 부라우저 에서 만 사용가능한 전역객채 에 있어 브라우저가 맞지않아 window is not defined 같은 에러 가 발생할수 있다
  - 클라이언트에서만 실행되는 코드가 많아질수록 SSR의 장점을 잃게 된다
  ### 2.**적절한 서버가 구축돼 있어야 한다.**
  - 서버를 구축할때 필요한 부분
    1. 사용자 요청에 적절하게 대응할 수 있는 물리적 가용량
    2. 예기치 않은 장애 상황에 대응하기위한 복구전략
    3. 요청의 분산 및 프로세스가 예기치 못한 다운 상황을 대비한 PM2와같은 프로세스 매니저 의 도움
  ### 3. **서비스 지연에 따른 문제**
  - SPA의경우 일부화면을 보여주면서 로딩중인 화면을 분리 할수있지만
  - SSR의 경우 지연이 끝나기 전까지 어떤 정보도 제공할수없고 , 사용자경험을 더 않좋게 할수 있다
  # **SPA 와 SSR 을 모두 알아야 하는 이유**
  - SSR이 모든 문제에 해결책이 되지 못한다
  - 가장 최상위에서 볼경우 SPA는 단연코 멀티 페이지 애플리케이션 보다 좋다
  - 평균적인 상황의 경우 SPA는 멀티 페이지 애플리케이션보다 느리다
  ### 현대의 SSR
  - 요즘 SSR의 경우 이전의 SSR의 장점인 초기 렌더링과 라우팅에서의 SPA의 장점을 모두 취한 방식으로 작동한다 현재 예시로는 Next.js , Remix 등 요즘 각광받는 서버 사이드 렌더링 프레임 워크가 있다
