# DOM의 랜더링과정

1. 사용자 요청주소에서 HTML 파일다운
2. HTML 파싱을 통해 DOM 노드 로 구성된 트리(DOM 생성
3. CSS 파일 발견시 CSS 파일또한 구성 (CSSOM)
4. 2번과정에서 생성된 DOM 순회
    1. DOM노드 순회시 display: none일 경우 (방문 → 작업) x → 트리 분석과정 시간 단축
5. CSS 적용하는과정 (크게 2가지)
    1. 레이아웃(layout)
        1.  각 노드가 브라우저 화면의 어느 좌표에 놓여야 할지 계산하는 과정
        2. 레이아웃시 페인팅 과정또한 포함
    2. 페인팅(painting)
        1. layout 단계를 거친 노드에 색과 같은 실제 유호한 모습을 그리는과정
        2. layout 과정 없이, painting 만 실행되기도 함
    

---

# 가상 DOM

## 탄생배경

특정 요소의 노출여부가 변경되거나 사이즈가 변경되는등 다양한 요소와 크기를 재계산할경우 **레이아웃**이 일어나고

또한 필연적으로 **리페인팅**이 일어나 비용적으로 많이 들어간다

# 가상 DOM을 위한 아키텍쳐, 리액트 파이버 (React Fiber )

- **fiber Reconciler** 가 관리한다
- 단순한 자바스크립트 객체로 구성됨

## 재조정(reconciliation)

리엑트에서 어떠한 부분을 새롭게 렌더링 해야하는지 가상 DOM과 실제 DOM을 비교하는작업

## React Fiber , React 요소의 차이점

- 요소의 경우 랜더링 발생시 새롭게 생성되지만 , Fiber는 가급적 재사용됨

## 하는일

1. 작업을 작은 단위로 분할하고 쪼갠다음 , 우선순위를 매긴다
2. 1번 작업을 일시 중지 나중에 다시 시작 할수 있다 
3. 2번 중지후 , 다시 시작 하지않거나 필요하지않을 경우 삭제 가능
4. Fiber 은 모든 과정이 비동기로 일어난다

## 작업순서

1. beginWork()함수를 실행후 파이버 작업을 진행함
2. 더이상 자식이없는 파이버를 만날때까지 트리형식으로 진행
3. 2번이 끝날경우 completeWork() 실행 파이버 작업 완료
4. 형제가 있을경우 형제로 넘어감
5. 3,4번이 끝나면 return 후 작업이 완료됨